
<!DOCTYPE HTML>

<html>

<head>
	<meta charset="utf-8">
	<title>Han</title>
	<meta name="author" content="Zealoct">

	
	<meta name="description" content="2014年05月20日 Android, Framebuffer, Linux, Ubuntu Comments 如何写 Ubuntu 的 Framebuffer 最近有个小项目，想在 Android 上跑一个通过直接读写 framebuffer 实现的 vnc 客户端，
所以发现了这个 &hellip;">
	

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/atom.xml" rel="alternate" title="Han" type="application/atom+xml">
	
	<link rel="canonical" href="http://zealoct.github.io/">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="/stylesheets/font-awesome.min.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<link href='http://fonts.googleapis.com/css?family=Nunito:400,300,700' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
  
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-48829613-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>


</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><div class="profilepic">
	
	<img src="/images/profile.jpg" alt="Profile Picture" style="width: 160px;" />
	<!--<img src="http://www.gravatar.com/avatar/?s=160" alt="Profile Picture" style="width: 160px;" />-->
	
</div>

<nav id="main-nav"><ul class="main">
    <li><a href="/">博客</a></li>
    <li><a href="/blog/archives">列表</a> | <a href="/blog/categories">标签</a></li>
	<li><a href="/notes">笔记</a></li>
    <li><a href="http://about.me/hanjc" target="_blank">关于我</a></li>
</ul>

</nav>
<nav id="sub-nav">
	<div class="social">
		
		
		
		
			<a class="twitter" href="http://twitter.com/zealoct" title="Twitter">Twitter</a>
		
		
			<a class="github" href="https://github.com/zealoct" title="GitHub">GitHub</a>
		
		
		
		
		
		
		
		
		
		
			<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</nav>
</header>				
			</div>
		</div>	
		<div class="mid-col">
			
				
<div id="banner" class="inner">
	<div class="container">
		<ul class="feed"></ul>
	</div>
	<small><a href="http://twitter.com/zealoct">zealoct</a> @ <a href="http://twitter.com">Twitter</a></small>
	<div class="loading">Loading...</div>
</div>
<script src="/javascripts/twitter.js"></script>
<script type="text/javascript">
	(function($){
		$('#banner').getTwitterFeed('zealoct', 5, );
	})(jQuery);
</script>

			
			<div class="mid-col-container">
				<div id="content" class="inner">
<div itemscope itemtype="http://schema.org/Blog">


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<span class="date">








  


<time datetime="2014-05-20T20:26:25+08:00" data-updated="true" itemprop="datePublished">2014年05月20日</time></span>
		<span class="tags">


	<a class='category' href='/blog/categories/android/'>Android</a>, <a class='category' href='/blog/categories/framebuffer/'>Framebuffer</a>, <a class='category' href='/blog/categories/linux/'>Linux</a>, <a class='category' href='/blog/categories/ubuntu/'>Ubuntu</a>


</span>
		
			<span class="comments"><a href="/blog/2014/05/20/ubuntu-fbvnc/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2014/05/20/ubuntu-fbvnc/" itemprop="url">如何写 Ubuntu 的 Framebuffer</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>最近有个小项目，想在 Android 上跑一个通过直接读写 framebuffer 实现的 vnc 客户端，
所以发现了这个 <a href="https://github.com/zohead/fbvnc">fbvnc</a>， 是 github 上一个小哥儿捣鼓的，基于现有的一个同名项目开发，专为嵌入式设备使用。这个小的 vnc 客户端的不足当然有很多，比如连基本的窗口都木有，直接占用了你整个 framebuffer，不能调整分辨率，巨慢无比，卡的紧了就直接挂，但是它有一个最大的优点，就是真的非常简单，除了一些基本的 Linux 库之外没有任何第三方的依赖。</p>

<p>以上算是个小广告吧 (=</p>

<p>但是一个很大的问题是，这货在 ubuntu 上不 work……什么原因呢，做个小测试看一看。</p>


		
		<a href="/blog/2014/05/20/ubuntu-fbvnc/" class="more-link">Read on &rarr;</a>
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<span class="date">








  


<time datetime="2014-04-05T13:31:50+08:00" data-updated="true" itemprop="datePublished">2014年04月05日</time></span>
		<span class="tags">


	<a class='category' href='/blog/categories/algorithm/'>Algorithm</a>


</span>
		
			<span class="comments"><a href="/blog/2014/04/05/recursion-and-dp/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2014/04/05/recursion-and-dp/" itemprop="url">简单的递归和动态规划</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<h3>题目：WordBreak</h3>

<p>首先定义如下表示</p>

<p><strong>str[n:m] </strong>为字符串 str 从下标 n 开始到下标 m-1 的字串</p>

<p>例如 str = &ldquo;abcdef&rdquo; str[4:6] = &ldquo;ef&#8221;，str[1:3] = &#8220;bc&#8221;，str[3:4] = &#8220;d&rdquo;</p>

<p><strong>str[n:] </strong>为字符串从下标 n 开始直到字符串结束的子串</p>

<p>例如 str = &ldquo;abcdef&rdquo; str[2:] = ”cdef“</p>

<p><strong>str[:m] </strong>为字符串从头开始直到下标 m-1 的子串</p>

<p>例如 str = &ldquo;abcdef&rdquo; str[:3] = ”abc“</p>

<p><strong>stat[n] </strong>表示子串 str[n:] 能不能用字典中的单词表示</p>


		
		<a href="/blog/2014/04/05/recursion-and-dp/" class="more-link">Read on &rarr;</a>
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<span class="date">








  


<time datetime="2014-03-05T19:54:09+08:00" data-updated="true" itemprop="datePublished">2014年03月05日</time></span>
		<span class="tags">


	<a class='category' href='/blog/categories/assemble/'>Assemble</a>, <a class='category' href='/blog/categories/c/'>C</a>, <a class='category' href='/blog/categories/linux/'>Linux</a>


</span>
		
			<span class="comments"><a href="/blog/2014/03/05/c-asm/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2014/03/05/c-asm/" itemprop="url">Linux 下 C 的扩展内联汇编</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>简单总结了一下自己看到用到的一些内联汇编的知识点，并不是一个完整的总结，以后对内联汇编有了新的了解会慢慢扩充。</p>

<p>详细细节可以参考 gcc 关与扩展内联汇编的 <a href="http://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html#Extended-Asm">文档</a></p>

<h2>格式说明</h2>

<pre><code>__asm__　__volatile__("Instruction List" : Output : Input : Clobber/Modify)
</code></pre>

<p>冒号的使用原则（<em>O, I, C 分别指代 Output, Input, Clobber/Modify</em>）：</p>

<ol>
<li>C 为空，第三个冒号必须省略</li>
<li>O、I 为空时，前边的冒号（第一、二个）可选择性省略</li>
<li>O，I，C 中任何一个不为空，则之前的冒号均必须保留，如只有 I 不为空时，O 和 I 之前的冒号必须保留，只有 C 不为空时三个冒号都必须保留</li>
</ol>


<p>合法的调用包括</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; &quot;</span> <span class="o">:</span> <span class="o">:</span> <span class="o">:</span> <span class="s">&quot;memory&quot;</span><span class="p">);</span>
</span><span class='line'><span class="n">__asm__</span><span class="p">(</span><span class="s">&quot; &quot;</span> <span class="o">:</span> <span class="o">:</span><span class="p">);</span>
</span><span class='line'><span class="n">__asm__</span><span class="p">(</span><span class="s">&quot;mov %1, %%eax&quot;</span> <span class="o">:</span> <span class="s">&quot;=a&quot;</span><span class="p">(</span><span class="n">var_a</span><span class="p">));</span>
</span><span class='line'><span class="n">__asm__</span><span class="p">(</span><span class="s">&quot;mov %1, %%eax&quot;</span> <span class="o">:</span> <span class="s">&quot;=a&quot;</span><span class="p">(</span><span class="n">var_a</span><span class="p">)</span> <span class="o">:</span><span class="p">);</span>
</span><span class='line'><span class="n">__asm__</span><span class="p">(</span><span class="s">&quot;mov %%edx, %%eax&quot;</span> <span class="o">:</span> <span class="s">&quot;=a&quot;</span><span class="p">(</span><span class="n">var_a</span><span class="p">)</span> <span class="o">:</span> <span class="s">&quot;d&quot;</span><span class="p">(</span><span class="n">var_d</span><span class="p">));</span>
</span><span class='line'><span class="n">__asm__</span><span class="p">(</span><span class="s">&quot;mov %%edx, %%eax&quot;</span> <span class="o">:</span> <span class="s">&quot;=a&quot;</span><span class="p">(</span><span class="n">var_a</span><span class="p">)</span> <span class="o">:</span> <span class="o">:</span> <span class="s">&quot;ebx&quot;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>下面分别介绍指令列表、输出、输入和修改声明这四个部分。</p>


		
		<a href="/blog/2014/03/05/c-asm/" class="more-link">Read on &rarr;</a>
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<span class="date">








  


<time datetime="2014-03-03T19:56:09+08:00" data-updated="true" itemprop="datePublished">2014年03月03日</time></span>
		<span class="tags">


	<a class='category' href='/blog/categories/mobile/'>Mobile</a>, <a class='category' href='/blog/categories/notes/'>Notes</a>, <a class='category' href='/blog/categories/security/'>Security</a>, <a class='category' href='/blog/categories/ios/'>iOS</a>


</span>
		
			<span class="comments"><a href="/blog/2014/03/03/ios-security/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2014/03/03/ios-security/" itemprop="url">Notes on iOS Security Whitepaper</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>This notes is based on <em>iOS Security &ndash; February 2014</em>, origin link can be found <a href="http://images.apple.com/iphone/business/docs/iOS_Security_Feb14.pdf">here</a>.</p>

<p>This paper gives a brief description of iOS security, including hardware security features and how iOS leverages these features.</p>

<h2>System Security</h2>

<h3>Secure Boot Chain</h3>

<p>ROM is sealed with public key of Apple Root CA, and will verify the Low-Level Bootloader (LLB) before load it.</p>

<p>For devices with an A7 processor, the <em>Secure Enclave</em> coprocessor also utilizes a secure boot process that ensures its separate software is verified and signed by Apple.</p>

<p>Verification failure will enter <strong>recovery mode</strong>, if Boot ROM is not even able to load or verify LLB, it enters <strong>DFU (Device Firmware Update) mode</strong>.</p>

<h3>System Software Authorization</h3>

<p>GOAL: prevent the devices from being downgraded.</p>

<p>Need iTunes to upgrade, when upgrading, iTunes (or the device) would send</p>

<ol>
<li>a list cryptographic measurements of each installation bundle to be installed</li>
<li>nonce</li>
<li>device&rsquo;s unique ID (ECID)</li>
</ol>


<p>to Apple installation authorization server.</p>

<p>If upgrade request is permitted, server would add ECID to the measurement and signs the result.</p>

<p>Device would check each item loaded from disk at boot time.</p>


		
		<a href="/blog/2014/03/03/ios-security/" class="more-link">Read on &rarr;</a>
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<span class="date">








  


<time datetime="2014-02-27T14:11:32+08:00" data-updated="true" itemprop="datePublished">2014年02月27日</time></span>
		<span class="tags">

</span>
		
			<span class="comments"><a href="/blog/2014/02/27/using-theme-greyshade/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2014/02/27/using-theme-greyshade/" itemprop="url">Using Theme Greyshade</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>Sometimes ago I came across a blog <a href="http://samwize.com/">samwize</a>, who uses a slightly
modified theme called <a href="https://github.com/shashankmehta/greyshade">Greyshade</a>, which I
think is very beautiful, so I applied that theme immediately. Saddly this theme does
not support chinese very well, so I made some customization myself.</p>


		
		<a href="/blog/2014/02/27/using-theme-greyshade/" class="more-link">Read on &rarr;</a>
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<span class="date">








  


<time datetime="2014-02-24T15:00:00+08:00" data-updated="true" itemprop="datePublished">2014年02月24日</time></span>
		<span class="tags">


	<a class='category' href='/blog/categories/notes/'>Notes</a>, <a class='category' href='/blog/categories/vim/'>Vim</a>


</span>
		
			<span class="comments"><a href="/blog/2014/02/24/vim-notes/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2014/02/24/vim-notes/" itemprop="url">Vim Efficiency Notes</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>关于Vim的一些容易被忽视、却又能提升使用体验和操作效率的操作细节。同时记录Vim中一些（我见到过的）比较实用的配置，分享的同时也给自己留个备忘吧。
一下子总结不完整，慢慢更新。</p>


		
		<a href="/blog/2014/02/24/vim-notes/" class="more-link">Read on &rarr;</a>
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<span class="date">








  


<time datetime="2014-02-12T16:21:02+08:00" data-updated="true" itemprop="datePublished">2014年02月12日</time></span>
		<span class="tags">


	<a class='category' href='/blog/categories/distributed-systems/'>Distributed Systems</a>, <a class='category' href='/blog/categories/notes/'>Notes</a>


</span>
		
			<span class="comments"><a href="/blog/2014/02/12/paxos/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2014/02/12/paxos/" itemprop="url">Notes on Paxos Made Simple</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p><a href="http://pdos.csail.mit.edu/6.824-2013/papers/paxos-simple.pdf">Origin paper link</a></p>

<h3>Problem</h3>

<p>safety requirements</p>

<ul>
<li>Only a value that has been proposed may be chosen</li>
<li>Only a single value is chosen, and</li>
<li>A process never learns that a value has been chosen unless it
acutally has been</li>
</ul>


<p>three agents: <em>proposers</em>(P), <em>acceptors</em>(A), and <em>learners</em>(L).</p>


		
		<a href="/blog/2014/02/12/paxos/" class="more-link">Read on &rarr;</a>
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<span class="date">








  


<time datetime="2014-01-26T21:54:12+08:00" data-updated="true" itemprop="datePublished">2014年01月26日</time></span>
		<span class="tags">


	<a class='category' href='/blog/categories/exercises/'>Exercises</a>, <a class='category' href='/blog/categories/nebula/'>Nebula</a>, <a class='category' href='/blog/categories/security/'>Security</a>


</span>
		
			<span class="comments"><a href="/blog/2014/01/26/nebula-level13/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2014/01/26/nebula-level13/" itemprop="url">Exploit Exercises - Nebula Level 13</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<h3>About</h3>

<p>There is a security check that prevents the program from continuing execution if the user invoking it does not match a specific user id.</p>

<p>To do this level, log in as the <em>level13</em> account with the password <em>level13</em> . Files for this level can be found in /home/flag13.</p>


		
		<a href="/blog/2014/01/26/nebula-level13/" class="more-link">Read on &rarr;</a>
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<span class="date">








  


<time datetime="2014-01-26T20:12:53+08:00" data-updated="true" itemprop="datePublished">2014年01月26日</time></span>
		<span class="tags">


	<a class='category' href='/blog/categories/exercises/'>Exercises</a>, <a class='category' href='/blog/categories/nebula/'>Nebula</a>, <a class='category' href='/blog/categories/security/'>Security</a>


</span>
		
			<span class="comments"><a href="/blog/2014/01/26/nebula-level12/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2014/01/26/nebula-level12/" itemprop="url">Exploit Exercises - Nebula Level 12</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<h3>About</h3>

<p>There is a backdoor process listening on port 50001.</p>

<p>To do this level, log in as the <em>level12</em> account with the password <em>level12</em>. Files for this level can be found in /home/flag12.</p>


		
		<a href="/blog/2014/01/26/nebula-level12/" class="more-link">Read on &rarr;</a>
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<span class="date">








  


<time datetime="2014-01-26T16:44:20+08:00" data-updated="true" itemprop="datePublished">2014年01月26日</time></span>
		<span class="tags">


	<a class='category' href='/blog/categories/exercises/'>Exercises</a>, <a class='category' href='/blog/categories/nebula/'>Nebula</a>, <a class='category' href='/blog/categories/security/'>Security</a>


</span>
		
			<span class="comments"><a href="/blog/2014/01/26/nebula-level11/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2014/01/26/nebula-level11/" itemprop="url">Exploit Exercises - Nebula Level 11</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<h3>About</h3>

<p>The <em>/home/flag11/flag11</em> binary processes standard input and executes a shell command.</p>

<p>There are two ways of completing this level, you may wish to do both :&ndash;)</p>

<p>To do this level, log in as the <em>level11</em> account with the password <em>level11</em> . Files for this level can be found in /home/flag11.</p>


		
		<a href="/blog/2014/01/26/nebula-level11/" class="more-link">Read on &rarr;</a>
	</div>

</article>

</div>
<nav id="pagenavi">
    
    
        <a href="/blog/page/2/" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
			</div>
			<footer id="footer" class="inner">Copyright &copy; 2014

    Zealoct


Design credit: <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a></footer>
			

<script type="text/javascript">
      var disqus_shortname = 'hanjc';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>






		</div>
	</div>
</body>
</html>
